{
  "id": "domainate",
  "display_name": "Domainate",
  "category": "Domainator",
  "description": "Annotate sequence files with hmm profiles\n\nFor each CDS or protein in the input file, run the hmmer3 against the target domain hmm database to annotate all the different known/detectable domains in the CDS.\nHits with E value lower than the threshold (default 10) will be added to the annotation in genbank output file as a new \"feature\"\n\nNOTES: genbank files that contain translation annotations in their CDS features will run much faster than those without translation annotations.\n       domainate.py stores the entire reference set (usually the hmm database) in memory, so it is not suitable for cases where the reference \n       set is larger than your system memory (this may change in future versions).",
  "runner": "module",
  "entry_point": "domainator.domainate",
  "parameters": [
    {
      "name": "Input",
      "parameter": "input",
      "help": "the genbank or fasta files to annotate. Genbank files can be nucleotide (with CDS annotations) or peptide. Fasta files must be peptide.",
      "type": "file",
      "multiple": true,
      "flags": [
        "-i",
        "--input"
      ]
    },
    {
      "name": "Fasta Type",
      "parameter": "fasta_type",
      "help": "Whether the sequences in fasta files are protein or nucleotide sequences.",
      "type": "string",
      "choices": [
        "protein",
        "nucleotide"
      ],
      "default": "protein",
      "flags": [
        "--fasta_type"
      ]
    },
    {
      "name": "References",
      "parameter": "references",
      "help": "the names of the HMM files with profiles to search. Or reference protein fasta files.",
      "type": "string",
      "multiple": true,
      "flags": [
        "-r",
        "--references"
      ]
    },
    {
      "name": "Foldseek",
      "parameter": "foldseek",
      "help": "Foldseek database files.",
      "type": "string",
      "multiple": true,
      "flags": [
        "--foldseek"
      ]
    },
    {
      "name": "Esm2 3Di Weights",
      "parameter": "esm2_3Di_weights",
      "help": "checkpoint file for esm2_3Di model.",
      "type": "string",
      "flags": [
        "--esm2_3Di_weights"
      ]
    },
    {
      "name": "Esm2 3Di Device",
      "parameter": "esm2_3Di_device",
      "help": "device to use for esm2_3Di model.",
      "type": "string",
      "default": "cuda:0",
      "flags": [
        "--esm2_3Di_device"
      ]
    },
    {
      "name": "Output",
      "parameter": "output",
      "help": "output genbank filename. If not supplied, writes to stdout.",
      "type": "output",
      "flags": [
        "-o",
        "--output"
      ]
    },
    {
      "name": "Z",
      "parameter": "Z",
      "help": "Passed as the -Z parameter to hmmsearch: Assert that the total number of targets in your searches is <x>, for the purposes of per-sequence E-value calculations, rather than the actual number of targets seen. Default: 1000\nSet to 0 to use the number actual target sequences (currently this does does not account for taxonomic filtering).Supplying -Z is recommended for most use cases of domainate, as it will speed up the search and make comparisons between searches more meaningful.",
      "type": "string",
      "default": 1000,
      "flags": [
        "-Z"
      ]
    },
    {
      "name": "Evalue",
      "parameter": "evalue",
      "help": "threshold E value for the domain hit. Must be <=10. [default 0.001]",
      "type": "string",
      "default": 0.001,
      "flags": [
        "-e",
        "--evalue"
      ]
    },
    {
      "name": "Min Evalue",
      "parameter": "min_evalue",
      "help": "hits with E value LOWER (as in BETTER) than this will be filtered out. NOT FREQUENTLY USED. Use only if you want to eliminate close matches. Must be >=0. [default 0]",
      "type": "string",
      "default": 0.0,
      "flags": [
        "--min_evalue"
      ]
    },
    {
      "name": "Max Domains",
      "parameter": "max_domains",
      "help": "the maximum number of domains to be reported per CDS. If not specified, then no max_domains filter is applied.",
      "type": "string",
      "default": 0,
      "flags": [
        "--max_domains"
      ]
    },
    {
      "name": "Max Mode",
      "parameter": "max_mode",
      "help": "Run hmmsearch/phmmer in maximum sensitivity mode, which is much slower, but more sensitive.",
      "type": "boolean",
      "default": false,
      "flags": [
        "--max_mode"
      ]
    },
    {
      "name": "Include Taxids",
      "parameter": "include_taxids",
      "help": "Space separated list of taxids to include. Contigs with taxonomy not in this list will be skipped.",
      "type": "string",
      "multiple": true,
      "flags": [
        "--include_taxids"
      ]
    },
    {
      "name": "Exclude Taxids",
      "parameter": "exclude_taxids",
      "help": "Space separated list of taxids to exclude. Contigs with taxonomy in this list will be skipped.",
      "type": "string",
      "multiple": true,
      "flags": [
        "--exclude_taxids"
      ]
    },
    {
      "name": "Ncbi Taxonomy Path",
      "parameter": "ncbi_taxonomy_path",
      "help": "Path to NCBI taxonomy database directory. Will be created and downloaded if it does not exist.",
      "type": "file",
      "default": "/tmp/ncbi_taxonomy",
      "flags": [
        "--ncbi_taxonomy_path"
      ]
    },
    {
      "name": "Taxonomy Update",
      "parameter": "taxonomy_update",
      "help": "If taxonomy database exists, check it against the version on the ncbi server and update if there is a newer version.",
      "type": "boolean",
      "default": false,
      "flags": [
        "--taxonomy_update"
      ]
    },
    {
      "name": "Cpu",
      "parameter": "cpu",
      "help": "the number of cores of the cpu which are used at a time to run the search [default: use all available cores]",
      "type": "string",
      "default": 0,
      "flags": [
        "--cpu"
      ]
    },
    {
      "name": "Max Overlap",
      "parameter": "max_overlap",
      "help": "the maximum fractional of overlap between domains to be included in the annotated genbank. If >= 1, then no overlap filtering will be done.",
      "type": "string",
      "default": 1,
      "flags": [
        "--max_overlap"
      ]
    },
    {
      "name": "Overlap By Db",
      "parameter": "overlap_by_db",
      "help": "If activated, then overlap filtering will be done by database, rather than all together.",
      "type": "boolean",
      "default": false,
      "flags": [
        "--overlap_by_db"
      ]
    },
    {
      "name": "Hits Only",
      "parameter": "hits_only",
      "help": "when activated, the ouptut will only have contigs with at least one domain annotation. In many cases, domain_search.py will be faster and more appropriate.",
      "type": "boolean",
      "default": false,
      "flags": [
        "--hits_only"
      ]
    },
    {
      "name": "No Annotations",
      "parameter": "no_annotations",
      "help": "when activated, new annotations will not be added to the file. This is useful if you are just trying to extract a set of contigs for annotation in a later step.",
      "type": "boolean",
      "default": false,
      "flags": [
        "--no_annotations"
      ]
    },
    {
      "name": "Batch Size",
      "parameter": "batch_size",
      "help": "How many protein sequences to search at one time in a batch. Increasing this number might improve speeds at the cost of memory.",
      "type": "string",
      "default": 10000,
      "flags": [
        "--batch_size"
      ]
    },
    {
      "name": "Offset",
      "parameter": "offset",
      "help": "File offset to start reading records at. (Note that this usually only makes sense when there is just a single input file). Default: start at the top of the file",
      "type": "string",
      "flags": [
        "--offset"
      ]
    },
    {
      "name": "Recs To Read",
      "parameter": "recs_to_read",
      "help": "Stop after reading this many records. Default: read all the records",
      "type": "string",
      "flags": [
        "--recs_to_read"
      ]
    },
    {
      "name": "Gene Call",
      "parameter": "gene_call",
      "help": "When activated, new CDS annotations will be added with Prodigal in Metagenomic mode. If 'all', then any existing CDS annotations will be deleted and all contigs will be re-annotated. If 'unannotated', then only contigs without CDS annotations will be annotated. [default: None]. If you supply a nucleotide fasta file, be sure to also specify --fasta_type nucleotide. Note that if you do gene calling, it is STRONGLY recommended that you also supply -Z, because database size is pre-calcuated at the beginning of the execution, whereas gene-calling is done on the fly. Not supplying Z may become an error in the future.",
      "type": "string",
      "choices": [
        "all",
        "unannotated"
      ],
      "flags": [
        "--gene_call"
      ]
    }
  ],
  "advanced_parameters": []
}
