{
  "id": "find_features",
  "display_name": "Find Features",
  "category": "Editors",
  "description": "Annotate sequence files with feature detection algorithms\n\nFor each CDS or protein in the input file, run feature detection algorithms to identify transmembrane regions, signal peptides, and other sequence features.\n\nSupported algorithms:\n    - TMbed: Transmembrane protein prediction using ProtT5 language model embeddings\n    - MOTIF: PROSITE-style pattern matching for exact motif search",
  "runner": "module",
  "priority": 2,
  "entry_point": "domainator.find_features",
  "parameters": [
    {
      "name": "Input",
      "parameter": "input",
      "help": "The genbank or fasta files to annotate. Genbank files can be nucleotide (with CDS annotations) or peptide. Fasta files must be peptide.",
      "type": "file",
      "multiple": true,
      "required": true,
      "flags": [
        "-i",
        "--input"
      ],
      "file_types": [
        "gb",
        "gbk",
        "genbank",
        "gbff",
        "fasta",
        "fa",
        "faa",
        "fna"
      ]
    },
    {
      "name": "Fasta Type",
      "parameter": "fasta_type",
      "help": "Whether the sequences in fasta files are protein or nucleotide sequences.",
      "type": "string",
      "choices": [
        "protein",
        "nucleotide"
      ],
      "default": "protein",
      "flags": [
        "--fasta_type"
      ]
    },
    {
      "name": "Output",
      "parameter": "output",
      "help": "Output genbank filename. If not supplied, writes to stdout.",
      "type": "output",
      "required": true,
      "flags": [
        "-o",
        "--output"
      ]
    },
    {
      "name": "TMbed",
      "parameter": "tmbed",
      "help": "Run TMbed transmembrane and signal peptide prediction.",
      "type": "boolean",
      "default": false,
      "flags": [
        "--tmbed"
      ]
    },
    {
      "name": "Motif",
      "parameter": "motif",
      "help": "PROSITE motifs to search for. Example: '[DE](2)HS{P}X(2)PX(2,4)C' matches two Asp/Glu, then His, Ser, any except Pro, two of any, Pro, two to four of any, Cys. Motif names for boolean expressions are auto-generated by sanitizing the pattern.",
      "type": "string",
      "multiple": true,
      "flags": [
        "--motif"
      ]
    }
  ],
  "advanced_parameters": [
    {
      "name": "Cpu",
      "parameter": "cpu",
      "help": "The number of CPU threads to use [default: use all available cores]",
      "type": "integer",
      "default": 0,
      "flags": [
        "--cpu"
      ]
    },
    {
      "name": "Gene Call",
      "parameter": "gene_call",
      "help": "When activated, new CDS annotations will be added with Prodigal in Metagenomic mode. If 'all', then any existing CDS annotations will be deleted and all contigs will be re-annotated. If 'unannotated', then only contigs without CDS annotations will be annotated.",
      "type": "string",
      "choices": [
        "all",
        "unannotated"
      ],
      "flags": [
        "--gene_call"
      ]
    },
    {
      "name": "GPU Device",
      "parameter": "gpu_device",
      "help": "For models that can use GPU acceleration, use this device if available. By default: if not set to 'None' try using the specified device for algorithms that allow GPU acceleration, if GPU not available, fall back to CPU mode if available. Choices: ['None', '0', 'cuda:0', ...]",
      "type": "string",
      "default": "cuda:0",
      "flags": [
        "--gpu_device"
      ]
    },
    {
      "name": "Batch Size",
      "parameter": "batch_size",
      "help": "Batch size for sequence processing. Larger values may be faster but require more memory.",
      "type": "integer",
      "default": 4000,
      "flags": [
        "--batch_size"
      ]
    },
    {
      "name": "Model Dir",
      "parameter": "model_dir",
      "help": "Base directory for downloading/loading algorithm model weights. Individual algorithms will create subdirectories as needed. Can be overridden per-algorithm with --[algorithm]_model_dir.",
      "type": "file",
      "flags": [
        "--model_dir"
      ]
    },
    {
      "name": "TMbed Model Dir",
      "parameter": "tmbed_model_dir",
      "help": "Directory to download/load TMbed's ProtT5 encoder model (~2.25 GB). Overrides --model_dir for TMbed. If neither is specified, uses HF_HOME env var if set, otherwise downloads to tmbed/models/t5/ inside the installed package.",
      "type": "file",
      "flags": [
        "--tmbed_model_dir"
      ]
    }
  ]
}
