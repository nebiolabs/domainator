{
  "id": "deduplicate_genbank",
  "display_name": "Deduplicate Genbank",
  "category": "Editors",
  "description": "Remove redundant sequences from a genbank file\n\nRuns a clustering algorithm, such as cdhit or usearch on sequences from a genbank (or fasta) file to reduce redundancy.\nThe \"hash\" algorithm is a faster way to deduplicate exact duplicates, by hashing the sequences and eliminating hash duplicates.",
  "runner": "module",
  "entry_point": "domainator.deduplicate_genbank",
  "parameters": [
    {
      "name": "Input",
      "parameter": "input",
      "help": "Genbank or fasta filenames.",
      "type": "file",
      "multiple": true,
      "flags": [
        "-i",
        "--input"
      ],
      "file_types": [
        "gb",
        "gbk",
        "genbank",
        "gbff",
        "fasta",
        "fa",
        "faa",
        "fna"
      ]

    },
    {
      "name": "Output",
      "parameter": "output",
      "help": "The name of the output file.",
      "type": "output",
      "required": true,
      "flags": [
        "-o",
        "--output"
      ]
    },
    {
      "name": "Fasta Out",
      "parameter": "fasta_out",
      "help": "makes output a fasta file when activated",
      "type": "boolean",
      "default": false,
      "flags": [
        "--fasta_out"
      ]
    },
    {
      "name": "Fasta Type",
      "parameter": "fasta_type",
      "help": "Whether the sequences in fasta files are protein or nucleotide sequences.",
      "type": "string",
      "choices": [
        "protein",
        "nucleotide"
      ],
      "default": "protein",
      "flags": [
        "--fasta_type"
      ]
    },
    {
      "name": "Algorithm",
      "parameter": "algorithm",
      "help": "Which clustering algorithm to use.",
      "type": "string",
      "choices": [
        "hash",
        "cd-hit",
        "usearch"
      ],
      "default": "cd-hit",
      "flags": [
        "--algorithm"
      ]
    },
    {
      "name": "Identity Threshold",
      "parameter": "id",
      "help": "Identity threshold (between 0 and 1), passed to cd-hit as the -c parameter or to usearach as the -id parameter.",
      "type": "number",
      "flags": [
        "--id"
      ],
      "min": 0,
      "max": 1,
      "default": 1
    },
    {
      "name": "Prefix Count",
      "parameter": "prefix_count",
      "help": "In the output genbank file, will prepend X- to the names of contigs, where X is the number of contigs from the original file collapsed into this centroid.",
      "type": "boolean",
      "default": false,
      "flags": [
        "--prefix_count"
      ]
    },
    {
      "name": "Suffix Count",
      "parameter": "suffix_count",
      "help": "In the output genbank file, will append -X to the names of contigs, where X is the number of contigs from the original file collapsed into this centroid.",
      "type": "boolean",
      "default": false,
      "flags": [
        "--suffix_count"
      ]
    },
    {
      "name": "Cores",
      "parameter": "cpu",
      "help": "The number of threads to use for deduplication [default: use all available cores]",
      "type": "integer",
      "default": 0,
      "flags": [
        "--cpu"
      ]
    },
    {
      "name": "Params",
      "parameter": "params",
      "help": "string of parameters to pass to the clustering algorithm, in the form of a json dict in single quotes. example: '\"-s\":0.9'",
      "type": "string",
      "flags": [
        "--params"
      ]
    },
    {
      "name": "Cluster Table",
      "parameter": "cluster_table",
      "help": "If supplied, then write a tab separated table with columns: representative, contigs.",
      "type": "output",
      "flags": [
        "--cluster_table"
      ]
    },
    {
      "name": "Cluster Sep",
      "parameter": "cluster_sep",
      "help": "Separator to separate individual contig names in the second column of the cluster table. Default: ' ; '",
      "type": "string",
      "default": " ; ",
      "flags": [
        "--cluster_sep"
      ]
    }
  ],
  "advanced_parameters": [
    {
      "name": "Log",
      "parameter": "log",
      "help": "The name of the log file. If not supplied, writes to stderr.",
      "type": "output",
      "flags": [
        "--log"
      ]
    },
    {
      "name": "Bin Path",
      "parameter": "bin_path",
      "help": "If the executable for the algorithm you're using isn't in the system path, you can provide the full path to the executable here.",
      "type": "string",
      "flags": [
        "--bin_path"
      ]
    }
  ]
}
